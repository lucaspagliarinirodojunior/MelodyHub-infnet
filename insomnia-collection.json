{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2025-11-10T00:00:00.000Z",
  "__export_source": "insomnia.desktop.app:v2023.5.8",
  "resources": [
    {
      "_id": "wrk_melodyhub",
      "_type": "workspace",
      "name": "MelodyHub API",
      "description": "API do MelodyHub - Sistema de gerenciamento de assinaturas musicais",
      "scope": "collection"
    },
    {
      "_id": "env_base",
      "_type": "environment",
      "name": "Base Environment",
      "data": {
        "base_url": "http://localhost:8080",
        "user_id": "",
        "transaction_id": "",
        "auth_token": "",
        "music_id": ""
      },
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "folder_auth",
      "_type": "request_group",
      "name": "üîê Authentication",
      "description": "Endpoints de autentica√ß√£o",
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "req_login",
      "_type": "request",
      "name": "Login",
      "method": "POST",
      "url": "{{ _.base_url }}/api/auth/login",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"lucas@example.com\",\n  \"password\": \"minhasenha123\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Faz login e retorna um token JWT com a role do usu√°rio. O token √© automaticamente salvo na vari√°vel auth_token do environment.",
      "parentId": "folder_auth",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.token) {\n  insomnia.environment.set('auth_token', body.token);\n  if (body.userId) {\n    insomnia.environment.set('user_id', body.userId);\n  }\n  console.log('‚úÖ Token salvo automaticamente!');\n} else {\n  console.log('‚ùå Falha ao obter token');\n}"
    },
    {
      "_id": "req_me",
      "_type": "request",
      "name": "Me - Ver meu plano",
      "method": "GET",
      "url": "{{ _.base_url }}/api/auth/me",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "Retorna os dados do usu√°rio logado (userId, name, email, role) baseado no token JWT. Use este endpoint para ver qual plano voc√™ est√°!",
      "parentId": "folder_auth"
    },
    {
      "_id": "folder_users",
      "_type": "request_group",
      "name": "Users",
      "description": "Endpoints de gerenciamento de usu√°rios",
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "req_create_user",
      "_type": "request",
      "name": "Create User",
      "method": "POST",
      "url": "{{ _.base_url }}/api/users",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"name\": \"Jo√£o Silva\",\n  \"email\": \"joao.silva@example.com\",\n  \"password\": \"senha123\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Cria um novo usu√°rio com nome, email e senha. O user_id √© automaticamente salvo no environment. Role padr√£o: SEM_PLANO.",
      "parentId": "folder_users",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('user_id', body.id);\n  console.log('‚úÖ User ID salvo automaticamente:', body.id);\n} else {\n  console.log('‚ùå Falha ao obter user_id');\n}"
    },
    {
      "_id": "req_get_all_users",
      "_type": "request",
      "name": "Get All Users",
      "method": "GET",
      "url": "{{ _.base_url }}/api/users",
      "headers": [],
      "description": "Lista todos os usu√°rios cadastrados",
      "parentId": "folder_users"
    },
    {
      "_id": "req_get_user_by_id",
      "_type": "request",
      "name": "Get User by ID",
      "method": "GET",
      "url": "{{ _.base_url }}/api/users/{{ _.user_id }}",
      "headers": [],
      "description": "Busca um usu√°rio espec√≠fico pelo ID (UUID). Configure user_id no environment.",
      "parentId": "folder_users"
    },
    {
      "_id": "req_get_user_by_email",
      "_type": "request",
      "name": "Get User by Email",
      "method": "GET",
      "url": "{{ _.base_url }}/api/users/email/joao.silva@example.com",
      "headers": [],
      "description": "Busca um usu√°rio pelo email",
      "parentId": "folder_users"
    },
    {
      "_id": "req_delete_user",
      "_type": "request",
      "name": "Delete User",
      "method": "DELETE",
      "url": "{{ _.base_url }}/api/users/{{ _.user_id }}",
      "headers": [],
      "description": "Remove um usu√°rio pelo ID (UUID). Configure user_id no environment.",
      "parentId": "folder_users"
    },
    {
      "_id": "folder_transactions",
      "_type": "request_group",
      "name": "Transactions",
      "description": "Endpoints de gerenciamento de transa√ß√µes/assinaturas",
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "req_create_transaction_basic",
      "_type": "request",
      "name": "Create Transaction - BASIC",
      "method": "POST",
      "url": "{{ _.base_url }}/api/transactions",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id }}\",\n  \"subscriptionType\": \"BASIC\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Cria uma transa√ß√£o BASIC (R$ 9.90/m√™s). O transaction_id √© salvo automaticamente no environment. Se aprovada, atualiza role do usu√°rio para BASIC.",
      "parentId": "folder_transactions",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('transaction_id', body.id);\n  console.log('‚úÖ Transaction ID salvo:', body.id);\n  console.log('Status:', body.status);\n} else {\n  console.log('‚ùå Falha ao obter transaction_id');\n}"
    },
    {
      "_id": "req_create_transaction_premium",
      "_type": "request",
      "name": "Create Transaction - PREMIUM",
      "method": "POST",
      "url": "{{ _.base_url }}/api/transactions",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id }}\",\n  \"subscriptionType\": \"PREMIUM\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Cria uma transa√ß√£o PREMIUM (R$ 19.90/m√™s). O transaction_id √© salvo automaticamente no environment. Se aprovada, atualiza role do usu√°rio para PREMIUM.",
      "parentId": "folder_transactions",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('transaction_id', body.id);\n  console.log('‚úÖ Transaction ID salvo:', body.id);\n  console.log('Status:', body.status);\n} else {\n  console.log('‚ùå Falha ao obter transaction_id');\n}"
    },
    {
      "_id": "req_get_all_transactions",
      "_type": "request",
      "name": "Get All Transactions",
      "method": "GET",
      "url": "{{ _.base_url }}/api/transactions",
      "headers": [],
      "description": "Lista todas as transa√ß√µes cadastradas",
      "parentId": "folder_transactions"
    },
    {
      "_id": "req_get_transaction_by_id",
      "_type": "request",
      "name": "Get Transaction by ID",
      "method": "GET",
      "url": "{{ _.base_url }}/api/transactions/{{ _.transaction_id }}",
      "headers": [],
      "description": "Busca uma transa√ß√£o espec√≠fica pelo ID (UUID). Configure transaction_id no environment.",
      "parentId": "folder_transactions"
    },
    {
      "_id": "req_get_transactions_by_user",
      "_type": "request",
      "name": "Get Transactions by User",
      "method": "GET",
      "url": "{{ _.base_url }}/api/transactions/user/{{ _.user_id }}",
      "headers": [],
      "description": "Lista todas as transa√ß√µes de um usu√°rio espec√≠fico. Configure user_id no environment.",
      "parentId": "folder_transactions"
    },
    {
      "_id": "folder_examples",
      "_type": "request_group",
      "name": "üìã Example Flow",
      "description": "Fluxo de exemplo completo",
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "folder_music",
      "_type": "request_group",
      "name": "üéµ Music",
      "description": "Endpoints para gerenciamento de m√∫sicas",
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "req_upload_music",
      "_type": "request",
      "name": "Upload Music (ADMIN only)",
      "method": "POST",
      "url": "{{ _.base_url }}/music/upload",
      "body": {
        "mimeType": "multipart/form-data",
        "params": [
          {
            "name": "file",
            "type": "file",
            "fileName": "/path/to/your/music.mp3",
            "value": ""
          }
        ]
      },
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "Faz upload de um arquivo de m√∫sica (MP3, AAC, FLAC) para o servidor. REQUER ROLE ADMIN! O music_id √© salvo automaticamente no environment.",
      "parentId": "folder_music",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('music_id', body.id);\n  console.log('‚úÖ Music ID salvo:', body.id);\n} else {\n  console.log('‚ùå Falha ao obter music_id');\n}"
    },
    {
      "_id": "req_list_music",
      "_type": "request",
      "name": "List All Music",
      "method": "GET",
      "url": "{{ _.base_url }}/music/list",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "Lista todas as m√∫sicas cadastradas no sistema. Requer autentica√ß√£o (qualquer usu√°rio logado pode listar).",
      "parentId": "folder_music"
    },
    {
      "_id": "req_download_music",
      "_type": "request",
      "name": "Download Music",
      "method": "GET",
      "url": "{{ _.base_url }}/music/download/{{ _.music_id }}",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "Faz download de uma m√∫sica pelo ID. Requer autentica√ß√£o via JWT. Valida permiss√µes: SEM_PLANO n√£o pode baixar, BASIC pode baixar MP3/AAC, PREMIUM pode baixar tudo.",
      "parentId": "folder_music"
    },
    {
      "_id": "req_stream_music",
      "_type": "request",
      "name": "Stream Music (Playback)",
      "method": "GET",
      "url": "{{ _.base_url }}/music/stream/{{ _.music_id }}",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "Faz streaming/playback de uma m√∫sica pelo ID. Requer autentica√ß√£o via JWT. SEM_PLANO pode fazer stream de MP3/AAC, BASIC e PREMIUM podem fazer stream de tudo.",
      "parentId": "folder_music"
    },
    {
      "_id": "req_example_1_create_user",
      "_type": "request",
      "name": "1. Create User",
      "method": "POST",
      "url": "{{ _.base_url }}/api/users",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"name\": \"Maria Santos\",\n  \"email\": \"maria.santos@example.com\",\n  \"password\": \"minhasenha123\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "1Ô∏è‚É£ Criar usu√°rio e copiar o ID retornado para o environment",
      "parentId": "folder_examples"
    },
    {
      "_id": "req_example_2_create_transaction",
      "_type": "request",
      "name": "2. Create Transaction",
      "method": "POST",
      "url": "{{ _.base_url }}/api/transactions",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id }}\",\n  \"subscriptionType\": \"PREMIUM\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "2Ô∏è‚É£ Criar transa√ß√£o usando o user_id do passo anterior",
      "parentId": "folder_examples"
    },
    {
      "_id": "req_example_3_login",
      "_type": "request",
      "name": "3. Login",
      "method": "POST",
      "url": "{{ _.base_url }}/api/auth/login",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"maria.santos@example.com\",\n  \"password\": \"minhasenha123\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "3Ô∏è‚É£ Fazer login e copiar o token retornado para a vari√°vel auth_token",
      "parentId": "folder_examples"
    },
    {
      "_id": "req_example_4_check_plan",
      "_type": "request",
      "name": "4. Check My Plan (usando token)",
      "method": "GET",
      "url": "{{ _.base_url }}/api/auth/me",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "4Ô∏è‚É£ Ver qual plano est√° ativo (role: SEM_PLANO). Usa apenas o token!",
      "parentId": "folder_examples"
    },
    {
      "_id": "req_example_5_get_user_transactions",
      "_type": "request",
      "name": "5. Get User Transactions",
      "method": "GET",
      "url": "{{ _.base_url }}/api/transactions/user/{{ _.user_id }}",
      "headers": [],
      "description": "5Ô∏è‚É£ Listar todas as transa√ß√µes do usu√°rio",
      "parentId": "folder_examples"
    },
    {
      "_id": "req_example_6_check_plan_after",
      "_type": "request",
      "name": "6. Check My Plan Again (agora com PREMIUM)",
      "method": "GET",
      "url": "{{ _.base_url }}/api/auth/me",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "6Ô∏è‚É£ Ver o plano atualizado (role: PREMIUM). Automaticamente mudou ap√≥s transa√ß√£o aprovada!",
      "parentId": "folder_examples"
    }
  ]
}
