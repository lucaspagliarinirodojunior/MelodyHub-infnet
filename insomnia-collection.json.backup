{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2025-11-12T00:00:00.000Z",
  "__export_source": "insomnia.desktop.app:v2023.5.8",
  "resources": [
    {
      "_id": "wrk_melodyhub",
      "_type": "workspace",
      "name": "MelodyHub API",
      "description": "API do MelodyHub - Sistema de gerenciamento de assinaturas musicais com valida√ß√£o de cart√£o de cr√©dito",
      "scope": "collection"
    },
    {
      "_id": "env_base",
      "_type": "environment",
      "name": "Base Environment",
      "data": {
        "base_url": "http://localhost:8080",
        "user_id": "",
        "credit_card_id": "",
        "transaction_id": "",
        "auth_token": "",
        "music_id": ""
      },
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "folder_auth",
      "_type": "request_group",
      "name": "üîê Authentication",
      "description": "Endpoints de autentica√ß√£o",
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "req_login",
      "_type": "request",
      "name": "Login",
      "method": "POST",
      "url": "{{ _.base_url }}/api/auth/login",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"lucas@example.com\",\n  \"password\": \"minhasenha123\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Faz login e retorna um token JWT com a role do usu√°rio. O token √© automaticamente salvo na vari√°vel auth_token do environment.",
      "parentId": "folder_auth",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.token) {\n  insomnia.environment.set('auth_token', body.token);\n  if (body.userId) {\n    insomnia.environment.set('user_id', body.userId);\n  }\n  console.log('‚úÖ Token salvo automaticamente!');\n} else {\n  console.log('‚ùå Falha ao obter token');\n}"
    },
    {
      "_id": "req_me",
      "_type": "request",
      "name": "Me - Ver meu plano",
      "method": "GET",
      "url": "{{ _.base_url }}/api/auth/me",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "Retorna os dados do usu√°rio logado (userId, name, email, role) baseado no token JWT. Use este endpoint para ver qual plano voc√™ est√°!",
      "parentId": "folder_auth"
    },
    {
      "_id": "folder_users",
      "_type": "request_group",
      "name": "üë• Users",
      "description": "Endpoints de gerenciamento de usu√°rios",
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "req_create_user",
      "_type": "request",
      "name": "Create User",
      "method": "POST",
      "url": "{{ _.base_url }}/api/users",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"name\": \"Jo√£o Silva\",\n  \"email\": \"joao.silva@example.com\",\n  \"password\": \"senha123\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Cria um novo usu√°rio com nome, email e senha. O user_id √© automaticamente salvo no environment. Role padr√£o: SEM_PLANO.",
      "parentId": "folder_users",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('user_id', body.id);\n  console.log('‚úÖ User ID salvo automaticamente:', body.id);\n} else {\n  console.log('‚ùå Falha ao obter user_id');\n}"
    },
    {
      "_id": "req_get_all_users",
      "_type": "request",
      "name": "Get All Users",
      "method": "GET",
      "url": "{{ _.base_url }}/api/users",
      "headers": [],
      "description": "Lista todos os usu√°rios cadastrados",
      "parentId": "folder_users"
    },
    {
      "_id": "req_get_user_by_id",
      "_type": "request",
      "name": "Get User by ID",
      "method": "GET",
      "url": "{{ _.base_url }}/api/users/{{ _.user_id }}",
      "headers": [],
      "description": "Busca um usu√°rio espec√≠fico pelo ID (UUID). Configure user_id no environment.",
      "parentId": "folder_users"
    },
    {
      "_id": "req_get_user_by_email",
      "_type": "request",
      "name": "Get User by Email",
      "method": "GET",
      "url": "{{ _.base_url }}/api/users/email/joao.silva@example.com",
      "headers": [],
      "description": "Busca um usu√°rio pelo email",
      "parentId": "folder_users"
    },
    {
      "_id": "req_delete_user",
      "_type": "request",
      "name": "Delete User",
      "method": "DELETE",
      "url": "{{ _.base_url }}/api/users/{{ _.user_id }}",
      "headers": [],
      "description": "Remove um usu√°rio pelo ID (UUID). Configure user_id no environment.",
      "parentId": "folder_users"
    },
    {
      "_id": "folder_credit_cards",
      "_type": "request_group",
      "name": "üí≥ Credit Cards",
      "description": "Endpoints de gerenciamento de cart√µes de cr√©dito",
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "req_create_credit_card_visa",
      "_type": "request",
      "name": "Create Credit Card - VISA",
      "method": "POST",
      "url": "{{ _.base_url }}/api/credit-cards",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id }}\",\n  \"cardNumber\": \"4532015112830366\",\n  \"cardHolderName\": \"JOAO SILVA\",\n  \"expirationMonth\": 12,\n  \"expirationYear\": 2026,\n  \"cvv\": \"123\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Cria um cart√£o VISA v√°lido (algoritmo de Luhn). O credit_card_id √© automaticamente salvo no environment.",
      "parentId": "folder_credit_cards",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('credit_card_id', body.id);\n  console.log('‚úÖ Credit Card ID salvo:', body.id);\n  console.log('Bandeira:', body.brand);\n  console.log('Status:', body.status);\n} else {\n  console.log('‚ùå Falha ao obter credit_card_id');\n}"
    },
    {
      "_id": "req_create_credit_card_mastercard",
      "_type": "request",
      "name": "Create Credit Card - MASTERCARD",
      "method": "POST",
      "url": "{{ _.base_url }}/api/credit-cards",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id }}\",\n  \"cardNumber\": \"5425233430109903\",\n  \"cardHolderName\": \"JOAO SILVA\",\n  \"expirationMonth\": 6,\n  \"expirationYear\": 2027,\n  \"cvv\": \"456\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Cria um cart√£o MASTERCARD v√°lido (algoritmo de Luhn).",
      "parentId": "folder_credit_cards"
    },
    {
      "_id": "req_get_credit_card_by_id",
      "_type": "request",
      "name": "Get Credit Card by ID",
      "method": "GET",
      "url": "{{ _.base_url }}/api/credit-cards/{{ _.credit_card_id }}",
      "headers": [],
      "description": "Busca um cart√£o de cr√©dito pelo ID. Mostra n√∫mero mascarado, status e se est√° v√°lido/expirado.",
      "parentId": "folder_credit_cards"
    },
    {
      "_id": "req_get_credit_cards_by_user",
      "_type": "request",
      "name": "Get Credit Cards by User",
      "method": "GET",
      "url": "{{ _.base_url }}/api/credit-cards/user/{{ _.user_id }}",
      "headers": [],
      "description": "Lista todos os cart√µes de cr√©dito de um usu√°rio (ativos e inativos).",
      "parentId": "folder_credit_cards"
    },
    {
      "_id": "req_get_active_credit_cards_by_user",
      "_type": "request",
      "name": "Get Active Credit Cards by User",
      "method": "GET",
      "url": "{{ _.base_url }}/api/credit-cards/user/{{ _.user_id }}/active",
      "headers": [],
      "description": "Lista apenas os cart√µes ATIVOS de um usu√°rio.",
      "parentId": "folder_credit_cards"
    },
    {
      "_id": "req_update_card_status_inactive",
      "_type": "request",
      "name": "Update Card Status - INACTIVE",
      "method": "PATCH",
      "url": "{{ _.base_url }}/api/credit-cards/{{ _.credit_card_id }}/status",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"status\": \"INACTIVE\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Desativa um cart√£o de cr√©dito. Op√ß√µes: ACTIVE, INACTIVE, BLOCKED.",
      "parentId": "folder_credit_cards"
    },
    {
      "_id": "req_update_card_status_active",
      "_type": "request",
      "name": "Update Card Status - ACTIVE",
      "method": "PATCH",
      "url": "{{ _.base_url }}/api/credit-cards/{{ _.credit_card_id }}/status",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"status\": \"ACTIVE\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Reativa um cart√£o de cr√©dito.",
      "parentId": "folder_credit_cards"
    },
    {
      "_id": "req_delete_credit_card",
      "_type": "request",
      "name": "Delete Credit Card",
      "method": "DELETE",
      "url": "{{ _.base_url }}/api/credit-cards/{{ _.credit_card_id }}",
      "headers": [],
      "description": "Remove um cart√£o de cr√©dito do sistema.",
      "parentId": "folder_credit_cards"
    },
    {
      "_id": "folder_transactions",
      "_type": "request_group",
      "name": "üí∞ Transactions",
      "description": "Endpoints de gerenciamento de transa√ß√µes/assinaturas",
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "req_create_transaction_basic",
      "_type": "request",
      "name": "Create Transaction - BASIC",
      "method": "POST",
      "url": "{{ _.base_url }}/api/transactions",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id }}\",\n  \"subscriptionType\": \"BASIC\",\n  \"creditCardId\": {{ _.credit_card_id }}\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Cria uma transa√ß√£o BASIC (R$ 9.90/m√™s). REQUER creditCardId! Valida: cart√£o ativo, n√£o expirado, pertence ao usu√°rio, usu√°rio sem plano ativo.",
      "parentId": "folder_transactions",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('transaction_id', body.id);\n  console.log('‚úÖ Transaction ID salvo:', body.id);\n  console.log('Status:', body.status);\n  if (body.fraudReason) {\n    console.log('‚ùå Motivo:', body.fraudReason);\n  }\n} else {\n  console.log('‚ùå Falha ao criar transa√ß√£o');\n}"
    },
    {
      "_id": "req_create_transaction_premium",
      "_type": "request",
      "name": "Create Transaction - PREMIUM",
      "method": "POST",
      "url": "{{ _.base_url }}/api/transactions",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id }}\",\n  \"subscriptionType\": \"PREMIUM\",\n  \"creditCardId\": {{ _.credit_card_id }}\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Cria uma transa√ß√£o PREMIUM (R$ 19.90/m√™s). REQUER creditCardId! Valida todas as regras de antifraude.",
      "parentId": "folder_transactions",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('transaction_id', body.id);\n  console.log('‚úÖ Transaction ID salvo:', body.id);\n  console.log('Status:', body.status);\n  if (body.fraudReason) {\n    console.log('‚ùå Motivo:', body.fraudReason);\n  }\n} else {\n  console.log('‚ùå Falha ao criar transa√ß√£o');\n}"
    },
    {
      "_id": "req_get_all_transactions",
      "_type": "request",
      "name": "Get All Transactions",
      "method": "GET",
      "url": "{{ _.base_url }}/api/transactions",
      "headers": [],
      "description": "Lista todas as transa√ß√µes cadastradas",
      "parentId": "folder_transactions"
    },
    {
      "_id": "req_get_transaction_by_id",
      "_type": "request",
      "name": "Get Transaction by ID",
      "method": "GET",
      "url": "{{ _.base_url }}/api/transactions/{{ _.transaction_id }}",
      "headers": [],
      "description": "Busca uma transa√ß√£o espec√≠fica pelo ID (UUID). Mostra status e fraudReason se rejeitada.",
      "parentId": "folder_transactions"
    },
    {
      "_id": "req_get_transactions_by_user",
      "_type": "request",
      "name": "Get Transactions by User",
      "method": "GET",
      "url": "{{ _.base_url }}/api/transactions/user/{{ _.user_id }}",
      "headers": [],
      "description": "Lista todas as transa√ß√µes de um usu√°rio espec√≠fico.",
      "parentId": "folder_transactions"
    },
    {
      "_id": "folder_music",
      "_type": "request_group",
      "name": "üéµ Music",
      "description": "Endpoints para gerenciamento de m√∫sicas",
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "req_upload_music",
      "_type": "request",
      "name": "Upload Music (ADMIN only)",
      "method": "POST",
      "url": "{{ _.base_url }}/music/upload",
      "body": {
        "mimeType": "multipart/form-data",
        "params": [
          {
            "name": "file",
            "type": "file",
            "fileName": "/path/to/your/music.mp3",
            "value": ""
          }
        ]
      },
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "Faz upload de um arquivo de m√∫sica (MP3, AAC, FLAC) para o servidor. REQUER ROLE ADMIN! O music_id √© salvo automaticamente no environment.",
      "parentId": "folder_music",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('music_id', body.id);\n  console.log('‚úÖ Music ID salvo:', body.id);\n} else {\n  console.log('‚ùå Falha ao obter music_id');\n}"
    },
    {
      "_id": "req_list_music",
      "_type": "request",
      "name": "List All Music",
      "method": "GET",
      "url": "{{ _.base_url }}/music/list",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "Lista todas as m√∫sicas cadastradas no sistema. Requer autentica√ß√£o (qualquer usu√°rio logado pode listar).",
      "parentId": "folder_music"
    },
    {
      "_id": "req_download_music",
      "_type": "request",
      "name": "Download Music",
      "method": "GET",
      "url": "{{ _.base_url }}/music/download/{{ _.music_id }}",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "Faz download de uma m√∫sica pelo ID. Requer autentica√ß√£o via JWT. Valida permiss√µes: SEM_PLANO n√£o pode baixar, BASIC pode baixar MP3/AAC, PREMIUM pode baixar tudo.",
      "parentId": "folder_music"
    },
    {
      "_id": "req_stream_music",
      "_type": "request",
      "name": "Stream Music (Playback)",
      "method": "GET",
      "url": "{{ _.base_url }}/music/stream/{{ _.music_id }}",
      "headers": [
        {
          "name": "Authorization",
          "value": "Bearer {{ _.auth_token }}"
        }
      ],
      "description": "Faz streaming/playback de uma m√∫sica pelo ID. Requer autentica√ß√£o via JWT. SEM_PLANO pode fazer stream de MP3/AAC, BASIC e PREMIUM podem fazer stream de tudo.",
      "parentId": "folder_music"
    },
    {
      "_id": "folder_test_flow",
      "_type": "request_group",
      "name": "üß™ COMPLETE TEST FLOW",
      "description": "Fluxo completo de testes com valida√ß√£o de cart√£o e antifraude",
      "parentId": "wrk_melodyhub"
    },
    {
      "_id": "req_test_1_create_user",
      "_type": "request",
      "name": "1Ô∏è‚É£ Create User",
      "method": "POST",
      "url": "{{ _.base_url }}/api/users",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"name\": \"Maria Santos\",\n  \"email\": \"maria.santos@test.com\",\n  \"password\": \"senha123\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Passo 1: Criar usu√°rio. O user_id √© automaticamente salvo.",
      "parentId": "folder_test_flow",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('user_id', body.id);\n  console.log('‚úÖ User ID salvo:', body.id);\n  console.log('Role inicial:', body.role);\n} else {\n  console.log('‚ùå Falha ao criar usu√°rio');\n}"
    },
    {
      "_id": "req_test_2_create_valid_card",
      "_type": "request",
      "name": "2Ô∏è‚É£ Create Valid Credit Card",
      "method": "POST",
      "url": "{{ _.base_url }}/api/credit-cards",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id }}\",\n  \"cardNumber\": \"4532015112830366\",\n  \"cardHolderName\": \"MARIA SANTOS\",\n  \"expirationMonth\": 12,\n  \"expirationYear\": 2026,\n  \"cvv\": \"123\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Passo 2: Cadastrar cart√£o VISA v√°lido. O credit_card_id √© automaticamente salvo.",
      "parentId": "folder_test_flow",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('credit_card_id', body.id);\n  console.log('‚úÖ Credit Card ID salvo:', body.id);\n  console.log('Bandeira:', body.brand);\n  console.log('N√∫mero mascarado:', body.maskedCardNumber);\n  console.log('V√°lido:', body.isValid);\n} else {\n  console.log('‚ùå Falha ao criar cart√£o');\n}"
    },
    {
      "_id": "req_test_3_get_user_cards",
      "_type": "request",
      "name": "3Ô∏è‚É£ Verify User Has Card",
      "method": "GET",
      "url": "{{ _.base_url }}/api/credit-cards/user/{{ _.user_id }}/active",
      "headers": [],
      "description": "Passo 3: Verificar que o usu√°rio tem cart√£o ativo antes de criar transa√ß√£o.",
      "parentId": "folder_test_flow"
    },
    {
      "_id": "req_test_4_create_transaction",
      "_type": "request",
      "name": "4Ô∏è‚É£ Create Transaction (Should APPROVE)",
      "method": "POST",
      "url": "{{ _.base_url }}/api/transactions",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id }}\",\n  \"subscriptionType\": \"PREMIUM\",\n  \"creditCardId\": {{ _.credit_card_id }}\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Passo 4: Criar transa√ß√£o. Deve ser APROVADA (cart√£o v√°lido, usu√°rio sem plano).",
      "parentId": "folder_test_flow",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('transaction_id', body.id);\n  console.log('‚úÖ Transaction ID:', body.id);\n  console.log('Status:', body.status);\n  if (body.status === 'APPROVED') {\n    console.log('‚úÖ Transa√ß√£o APROVADA! Usu√°rio agora √© PREMIUM');\n  } else {\n    console.log('‚ùå Transa√ß√£o rejeitada:', body.fraudReason);\n  }\n} else {\n  console.log('‚ùå Falha ao criar transa√ß√£o');\n}"
    },
    {
      "_id": "req_test_5_get_user_verify_role",
      "_type": "request",
      "name": "5Ô∏è‚É£ Verify User Role Updated",
      "method": "GET",
      "url": "{{ _.base_url }}/api/users/{{ _.user_id }}",
      "headers": [],
      "description": "Passo 5: Verificar que a role do usu√°rio foi atualizada para PREMIUM.",
      "parentId": "folder_test_flow"
    },
    {
      "_id": "req_test_6_try_duplicate_plan",
      "_type": "request",
      "name": "6Ô∏è‚É£ Try Duplicate Plan (Should REJECT)",
      "method": "POST",
      "url": "{{ _.base_url }}/api/transactions",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id }}\",\n  \"subscriptionType\": \"BASIC\",\n  \"creditCardId\": {{ _.credit_card_id }}\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Passo 6: Tentar criar segunda assinatura. Deve ser REJEITADA (usu√°rio j√° tem plano ativo).",
      "parentId": "folder_test_flow",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body) {\n  console.log('Status:', body.status);\n  if (body.status === 'REJECTED') {\n    console.log('‚úÖ CORRETO! Transa√ß√£o rejeitada (j√° tem plano)');\n    console.log('Motivo:', body.fraudReason);\n  } else {\n    console.log('‚ùå ERRO! Transa√ß√£o deveria ser rejeitada!');\n  }\n}"
    },
    {
      "_id": "req_test_7_deactivate_card",
      "_type": "request",
      "name": "7Ô∏è‚É£ Deactivate Card",
      "method": "PATCH",
      "url": "{{ _.base_url }}/api/credit-cards/{{ _.credit_card_id }}/status",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"status\": \"INACTIVE\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Passo 7: Desativar o cart√£o para testar valida√ß√£o.",
      "parentId": "folder_test_flow"
    },
    {
      "_id": "req_test_8_create_new_user",
      "_type": "request",
      "name": "8Ô∏è‚É£ Create Second User (for card test)",
      "method": "POST",
      "url": "{{ _.base_url }}/api/users",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"name\": \"Pedro Oliveira\",\n  \"email\": \"pedro@test.com\",\n  \"password\": \"senha123\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Passo 8: Criar segundo usu√°rio para testar transa√ß√£o com cart√£o inativo.",
      "parentId": "folder_test_flow",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('user_id_2', body.id);\n  console.log('‚úÖ Segundo User ID salvo:', body.id);\n}"
    },
    {
      "_id": "req_test_9_create_card_for_user2",
      "_type": "request",
      "name": "9Ô∏è‚É£ Create Card for Second User",
      "method": "POST",
      "url": "{{ _.base_url }}/api/credit-cards",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id_2 }}\",\n  \"cardNumber\": \"5425233430109903\",\n  \"cardHolderName\": \"PEDRO OLIVEIRA\",\n  \"expirationMonth\": 6,\n  \"expirationYear\": 2027,\n  \"cvv\": \"456\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Passo 9: Criar cart√£o MASTERCARD para o segundo usu√°rio.",
      "parentId": "folder_test_flow",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body && body.id) {\n  insomnia.environment.set('credit_card_id_2', body.id);\n  console.log('‚úÖ Segundo Card ID salvo:', body.id);\n}"
    },
    {
      "_id": "req_test_10_try_wrong_card_owner",
      "_type": "request",
      "name": "üîü Try Transaction with Wrong Card (Should REJECT)",
      "method": "POST",
      "url": "{{ _.base_url }}/api/transactions",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"userId\": \"{{ _.user_id }}\",\n  \"subscriptionType\": \"BASIC\",\n  \"creditCardId\": {{ _.credit_card_id_2 }}\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ],
      "description": "Passo 10: Tentar usar cart√£o de outro usu√°rio. Deve ser REJEITADA.",
      "parentId": "folder_test_flow",
      "afterResponseScript": "const response = insomnia.response;\nconst body = JSON.parse(response.body);\n\nif (body) {\n  console.log('Status:', body.status);\n  if (body.status === 'REJECTED' && body.fraudReason.includes('n√£o pertence')) {\n    console.log('‚úÖ CORRETO! Cart√£o n√£o pertence ao usu√°rio');\n    console.log('Motivo:', body.fraudReason);\n  } else {\n    console.log('‚ùå ERRO! Deveria rejeitar cart√£o de outro usu√°rio!');\n  }\n}"
    },
    {
      "_id": "req_test_11_summary",
      "_type": "request",
      "name": "1Ô∏è‚É£1Ô∏è‚É£ Get All Transactions (Summary)",
      "method": "GET",
      "url": "{{ _.base_url }}/api/transactions",
      "headers": [],
      "description": "Passo 11: Ver resumo de todas as transa√ß√µes (aprovadas e rejeitadas).",
      "parentId": "folder_test_flow"
    }
  ]
}
